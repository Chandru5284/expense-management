import type { Metadata } from "next";
import { cookies } from 'next/headers'
import { redirect } from "next/navigation";

// import components
import { SideBar } from "@/components/dashboard";
import MobileMenuBar from "@/components/dashboard/MobileMenuBar";

export const metadata: Metadata = {
    title: "Create Next App",
    description: "Generated by create next app",
};

export default function DashboardLayout({
    children,
}: Readonly<{
    children: React.ReactNode;
}>) {

    const cookieStore = cookies()
    const is_require_member_info = cookieStore.get('require_member_info')?.value

    if (is_require_member_info == "true") {
        redirect("/app")
    }

    return (
        <div className='bg-accent h-screen w-full sm:flex'>
            <div className='p-5 h-full basis-[8%] hidden sm:block'>
                <div className='h-full bg-card rounded-xl shadow-lg'>
                    <SideBar />
                </div>
            </div>
            <div className='p-3 sm:p-5 h-[88%] sm:h-full basis-full sm:basis-[92%]'>
                <div className='h-full bg-card rounded-xl shadow-lg'>
                    {children}
                </div>
            </div>

            <div className='sm:hidden h-[12%] py-1 px-3 '>
                <div className='h-full bg-card rounded-xl shadow-lg flex items-center w-full px-2'>
                    <MobileMenuBar />
                </div>
            </div>
        </div>
    );
}
